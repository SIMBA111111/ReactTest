name: GitHub Actions Demo
run-name: ${{ github.actor }} is changed project ðŸš€
on: [push]
jobs:
  Clon-repo:
    runs-on: ubuntu-22.04
    steps: 
      - run: echo "Start cloning repo..."
      
      - name: Checkout code
        uses: actions/checkout@v2 
        
      # - name: Install dependencies
        # run: npm install
        
      # - name: Build
        # run: npm run build
                
      - name: Create SSH key
        run: |
          mkdir -p ~/.ssh/
          echo "$SSH_PRIVATE_KEY" > ~/.ssh/private.key
          sudo chmod 600 ~/.ssh/private.key
          echo "$SSH_KNOWN_HOSTS" > ~/.ssh/known_hosts
        shell: bash
        env:
          SSH_PRIVATE_KEY: ${{secrets.SSH_PRIVATE_KEY}}
          SSH_KNOWN_HOSTS: ${{secrets.SSH_KNOWN_HOSTS}}
          SSH_KEY_PATH: ${{ github.workspace }}/../private.key
      
      - name: Check SSH key
        run: cat ~/.ssh/private.key
      
      - name: Deploy
        run: ssh -o StrictHostKeyChecking=no -i ~/.ssh/private.key root@89.169.1.160 "echo 'Deployment successful!'"
